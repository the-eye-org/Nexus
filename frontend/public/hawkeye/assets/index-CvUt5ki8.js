(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();let r;function S(){r||(r=new(window.AudioContext||window.webkitAudioContext)),r.state==="suspended"&&r.resume()}function m(e,t,o,i=.1){r||S();const n=r.createOscillator(),s=r.createGain();n.type=t,n.frequency.setValueAtTime(e,r.currentTime),s.gain.setValueAtTime(i,r.currentTime),s.gain.exponentialRampToValueAtTime(.01,r.currentTime+o),n.connect(s),s.connect(r.destination),n.start(),n.stop(r.currentTime+o)}const c={isMuted:!1,toggleMute:function(){return this.isMuted=!this.isMuted,this.isMuted?r&&r.suspend():r&&r.resume(),this.isMuted},hover:()=>m(200,"sine",.1,.05),click:()=>m(800,"square",.05,.1),hit:()=>m(440,"triangle",.2,.2),miss:()=>m(100,"sawtooth",.3,.1),error:()=>m(50,"sawtooth",.5,.3),scan:e=>m(e,"sine",.1,.1),success:()=>{r||S();let e=r.currentTime;[440,554,659,880].forEach((t,o)=>{const i=r.createOscillator(),n=r.createGain();i.frequency.setValueAtTime(t,e+o*.1),n.gain.setValueAtTime(.1,e+o*.1),n.gain.exponentialRampToValueAtTime(.01,e+o*.1+.5),i.connect(n),n.connect(r.destination),i.start(e+o*.1),i.stop(e+o*.1+.5)})},hum:()=>{r||S();const e=r.createOscillator(),t=r.createGain();return e.frequency.value=60,t.gain.value=.02,e.connect(t),t.connect(r.destination),e.start(),()=>{t.gain.exponentialRampToValueAtTime(.001,r.currentTime+1),e.stop(r.currentTime+1)}},playBGM:e=>{const t=new Audio(e);return t.loop=!0,t.volume=.3,t.play().catch(o=>{}),{stop:()=>t.pause(),play:()=>t.play(),setVolume:o=>t.volume=o,element:t}}};let x,E,w=!1,p=0,g=0;const I=3;function R(){w=!1,g=0;const e=document.querySelector("#stage-1");e.innerHTML=`
        <div class="device-panel">
            <div class="hud-layer">
                <div class="hud-ring ring-1"></div>
                <div class="hud-ring ring-2"></div>
                <div class="hud-ring ring-3"></div>
            </div>
            <img src="/nexus/hawkeye/assets/hawkeye_device_panel.png" alt="Device Panel" class="panel-img" />
            <div id="binary-output"></div>
            <div class="instruction">LOCATE SIGNAL SOURCE ALPHA</div>
            <div id="progress-text" style="position:absolute; top: 10px; right: 20px; color: #fff; font-family: monospace;">TARGETS: 0/3</div>
            <button id="transition-btn" style="display: none; margin-top: 20px;">PROCEED TO ROUND 2</button>
        </div>
    `,q(),document.addEventListener("mousemove",k),document.addEventListener("click",G),c.playBGM&&!window.currentBGM&&(window.currentBGM=c.playBGM("/assets/bgm.mp3"))}function q(){x=200+Math.random()*(window.innerWidth-400),E=200+Math.random()*(window.innerHeight-400),x=200+Math.random()*(window.innerWidth-400),E=200+Math.random()*(window.innerHeight-400);const t=document.querySelector(".instruction");if(t){const o=["ALPHA","BETA","GAMMA"];t.textContent=`LOCATE SIGNAL SOURCE ${o[g]}`,t.style.color="#e0e0e0"}}function k(e){if(h.currentStage!==1||w)return;const t=e.clientX-x,o=e.clientY-E,i=Math.sqrt(t*t+o*o),n=document.querySelector(".panel-img"),s=document.querySelector(".instruction"),u=document.querySelector("#cursor"),d=document.querySelectorAll(".hud-ring"),f=Date.now();if(i<20)s.textContent="SIGNAL DETECTED - FIRE",s.style.color="#b026ff",s.style.textShadow="0 0 20px #b026ff",u.style.filter="drop-shadow(0 0 10px #fff)",f-p>150&&(c.scan(880),p=f),navigator.vibrate&&navigator.vibrate(5),n.style.transform=`translate(${Math.random()*2}px, ${Math.random()*2}px) scale(1.05)`,d.forEach(l=>l.style.borderColor="#b026ff"),d.forEach(l=>l.style.boxShadow="0 0 15px #b026ff");else if(i<150)s.textContent="SIGNAL STRENGTHENING",s.style.color="#00ff00",s.style.textShadow="0 0 10px #00ff00",u.style.filter="none",n.style.transform="scale(1.02)",d.forEach(l=>l.style.borderColor="#00ff00"),d.forEach(l=>l.style.boxShadow="0 0 5px #00ff00"),f-p>300&&(c.scan(440),p=f);else{const l=["ALPHA","BETA","GAMMA"];s.textContent=`LOCATE SIGNAL SOURCE ${l[g]}`,s.style.color="#e0e0e0",s.style.textShadow="none",u.style.filter="none",n.style.transform="scale(1)",d.forEach(v=>v.style.borderColor="rgba(176, 38, 255, 0.3)"),d.forEach(v=>v.style.boxShadow="none"),f-p>800&&(c.scan(220),p=f)}}function G(e){if(h.currentStage!==1||w)return;const t=e.clientX-x,o=e.clientY-E;if(Math.sqrt(t*t+o*o)<50){g++;const n=document.querySelector("#progress-text");if(n&&(n.textContent=`TARGETS: ${g}/${I}`),g<I){c.hit(),q();const s=document.querySelector(".panel-img");s.classList.add("glitch"),setTimeout(()=>s.classList.remove("glitch"),300)}else P()}else{c.miss();const n=document.querySelector("#app");n.style.transform="translateX(5px)",setTimeout(()=>n.style.transform="translateX(0)",50)}}function P(){w=!0,c.success();const e=document.querySelector(".instruction"),t=document.querySelector(".panel-img"),o=document.querySelector("#binary-output");e.textContent="SYSTEM CRITICAL - DUMPING MEMORY",e.classList.add("glitch"),t.style.filter="hue-rotate(90deg) blur(2px)",document.body.style.backgroundColor="#1a0000";const i=setInterval(()=>{t.style.transform=`translate(${Math.random()*10-5}px, ${Math.random()*10-5}px)`,o.style.transform=`translate(${Math.random()*4-2}px, ${Math.random()*4-2}px) translate(-50%, -50%)`},50),s=Array.from({length:10},()=>Math.random()>.5?1:0),u=s.join(""),d=btoa(u);h.binaryCode=s,o.style.display="block";const f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";let l=0;const v=setInterval(()=>{if(o.innerText=d.split("").map((b,C)=>C<l?d[C]:f[Math.floor(Math.random()*f.length)]).join(""),l>=d.length){clearInterval(v),clearInterval(i),c.success(),t.style.transform="none",o.style.transform="translate(-50%, -50%)",document.body.style.backgroundColor="",e.textContent="MEMORY DUMP COMPLETE",e.classList.remove("glitch"),e.style.color="#ff8c00";const b=document.getElementById("transition-btn");b.innerText="PROCEED TO ROUND 2",b.style.display="block",b.onclick=()=>{N(),M(2)}}Math.random()>.7&&c.click(),l+=1/3},50)}function N(){document.removeEventListener("mousemove",k),document.removeEventListener("click",G)}let y=0,L=!1;function B(){const e=document.querySelector("#stage-2");e.innerHTML=`
        <div class="stage2-container">
            <div class="target-display">
                <div class="current-bit-display">TARGET: <span id="current-bit">?</span></div>
            </div>
            
            <div class="center-target" id="bullseye-target">
                <div class="reticle-ring"></div>
                <div class="reticle-dot"></div>
            </div>

            <div class="log-display" id="shot-log">
                <div class="log-title">SHOT LOG</div>
                <button id="clear-log-btn" style="position: absolute; bottom: 10px; right: 10px; font-size: 0.8rem; padding: 5px 10px; border: 1px solid #b026ff; background: rgba(0,0,0,0.5); color: #fff; cursor: pointer; pointer-events: auto;">CLEAR</button>
            </div>
            
            <div class="instruction-hint">
                <p>"A true marksman knows when NOT to hit."</p>
            </div>
        </div>
    `,y=0,L=!1,D();const t=document.getElementById("bullseye-target"),o=document.querySelector("#stage-2"),i=document.getElementById("clear-log-btn");t.onclick=n=>{n.stopPropagation(),O(!0)},o.onclick=n=>{O(!1)},i.onclick=n=>{n.stopPropagation(),y=0,document.getElementById("shot-log").querySelectorAll(".log-entry").forEach(d=>d.remove()),c.click()}}function O(e){if(L)return;const t=e?1:0,o=h.binaryCode[y];e?(A("IMPACT: BULLSEYE","neutral"),c.hit(),$()):(A("IMPACT: WIDE","neutral"),c.error(),H()),t===o?(y++,y>=h.binaryCode.length&&(L=!0,A("ACCESS GRANTED","good"),c.success(),setTimeout(()=>M(3),1500))):y=0}function A(e,t="neutral"){const o=document.getElementById("shot-log"),i=document.createElement("div");i.className=`log-entry ${t}`,i.innerText=`>> ${e}`,o.insertBefore(i,o.firstChild)}function D(){const e=document.getElementById("current-bit");e&&(e.innerText="?",e.style.color="#fff")}function $(){const e=document.getElementById("app");e.style.transform="scale(0.99)",setTimeout(()=>e.style.transform="scale(1)",50)}function H(){const e=document.querySelector(".stage2-container");e.classList.add("glitch"),setTimeout(()=>e.classList.remove("glitch"),500)}function U(){const e=document.querySelector("#stage-3");e.innerHTML=`
        <div class="soul-stone-container">
            <div class="stone-wrapper">
                <img src="/nexus/hawkeye/assets/hawkeye_soul_stone.png" alt="Soul Stone" class="soul-stone" />
                <div class="stone-glow"></div>
            </div>
            
            <div class="reward-text">
                <h1>SOUL STONE ACQUIRED</h1>
                <p style="color: #fff; font-family: 'Times New Roman', serif; font-style: italic; text-shadow: 2px 2px 4px #000; letter-spacing: 1px; font-size: 1.5rem; background: rgba(0,0,0,0.6); padding: 10px; border: 1px solid #444;">
                    "I cannot grant the truth you seek,<br>
                    Ask the one in <span style="color: #ff0000; text-shadow: 0 0 10px #ff0000; font-weight: bold;">red</span>, cursed to speak."
                </p>
            </div>
        </div>
    `,c.hum(),c.success(),document.querySelector(".soul-stone").animate([{transform:"scale(0) rotate(0deg)",opacity:0},{transform:"scale(1) rotate(360deg)",opacity:1}],{duration:2e3,easing:"cubic-bezier(0.34, 1.56, 0.64, 1)"})}const h={currentStage:1,binaryCode:[]};document.querySelector("#app");const T=document.querySelector("#cursor");document.addEventListener("mousemove",e=>{T.style.left=`${e.clientX}px`,T.style.top=`${e.clientY}px`});document.addEventListener("mousedown",()=>{T.style.transform="translate(-50%, -50%) scale(0.9)"});document.addEventListener("mouseup",()=>{T.style.transform="translate(-50%, -50%) scale(1)"});const a=document.createElement("div");a.id="start-overlay";a.innerHTML=`
    <div style="text-align: center; color: #b026ff; font-family: 'Orbitron', sans-serif;">
        <h1>HAWKEYE PROTOCOL</h1>
        <p>CLICK TO INITIALIZE SYSTEMS</p>
    </div>
`;a.style.position="fixed";a.style.top="0";a.style.left="0";a.style.width="100vw";a.style.height="100vh";a.style.background="rgba(0,0,0,0.9)";a.style.zIndex="100000";a.style.display="flex";a.style.justifyContent="center";a.style.alignItems="center";a.style.cursor="pointer";document.body.appendChild(a);a.addEventListener("click",()=>{S(),a.style.opacity="0",setTimeout(()=>a.remove(),500);const e=new(window.AudioContext||window.webkitAudioContext)().createOscillator();e.start(),e.stop(),M(1)});function M(e){document.querySelectorAll(".stage").forEach(o=>o.classList.remove("active"));const t=document.querySelector(`#stage-${e}`);t&&(t.classList.add("active"),h.currentStage=e,e===1&&R(),e===2&&B(),e===3&&U())}
