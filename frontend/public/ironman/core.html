<!DOCTYPE html>
<html>

<head>
    <title>Arc Reactor Core</title>
    <style>
        body {
            background: #000;
            text-align: center;
            padding-top: 40px;
            font-family: monospace;
            color: #00efff;
        }

        canvas {
            margin-top: 20px;
            border-radius: 12px;
            cursor: crosshair;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
        }

        .modal-content {
            background-color: #0a1a1a;
            margin: 10% auto;
            padding: 30px;
            border: 2px solid #00eaff;
            border-radius: 10px;
            width: 80%;
            max-width: 500px;
            box-shadow: 0 0 20px rgba(0, 234, 255, 0.5);
        }

        .modal h2 {
            color: #00eaff;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #00eaff;
        }

        .modal p {
            color: #00eaff;
            font-size: 1.1em;
            margin-bottom: 20px;
        }

        .modal input {
            padding: 10px;
            font-size: 1em;
            border: 2px solid #00eaff;
            background: #001a1a;
            color: #00eaff;
            border-radius: 5px;
            width: 200px;
            margin-bottom: 20px;
        }

        .modal input:focus {
            outline: none;
            box-shadow: 0 0 10px #00eaff;
        }

        .modal button {
            padding: 10px 30px;
            margin: 10px;
            border: 2px solid #00eaff;
            background: rgba(0, 234, 255, 0.1);
            color: #00eaff;
            cursor: pointer;
            border-radius: 5px;
            font-weight: bold;
            transition: 0.3s;
        }

        .modal button:hover {
            background: rgba(0, 234, 255, 0.3);
            box-shadow: 0 0 10px #00eaff;
        }

        .modal .error {
            color: #ff3333;
            margin-top: 10px;
            display: none;
        }

        .success-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
        }

        .success-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            max-width: 600px;
        }

        .success-content img {
            max-width: 100%;
            max-height: 600px;
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(0, 234, 255, 0.8);
        }

        .keypad-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            width: 100%;
        }

        .keypad-btn {
            padding: 18px;
            font-size: 1.2em;
            font-weight: bold;
            background: rgba(0, 234, 255, 0.08);
            border: 2px solid #00eaff;
            color: #00eaff;
            border-radius: 12px;
            cursor: pointer;
            transition: 0.25s;
            box-shadow: 0 0 8px #00eaff inset;
        }

        .keypad-btn:hover {
            background: rgba(0, 234, 255, 0.22);
            box-shadow: 0 0 15px #00eaff, 0 0 25px #00eaff inset;
            transform: translateY(-2px);
        }

        .special-btn {
            letter-spacing: 2px;
        }

        .special-btn.red {
            border-color: #ff4444;
            color: #ff4444;
            box-shadow: 0 0 10px #ff4444 inset;
        }

        .special-btn.red:hover {
            background: rgba(255, 68, 68, 0.2);
            box-shadow: 0 0 18px #ff4444, 0 0 25px #ff4444 inset;
        }

        .special-btn.green {
            border-color: #00ff99;
            color: #00ff99;
            box-shadow: 0 0 10px #00ff99 inset;
        }

        .special-btn.green:hover {
            background: rgba(0, 255, 153, 0.2);
            box-shadow: 0 0 18px #00ff99, 0 0 25px #00ff99 inset;
        }

        .modal {
            overflow-y: auto;
            padding-top: 40px;
            padding-bottom: 40px;
        }

        .modal-content {
            margin-top: 4% !important;
        }
    </style>
</head>

<body>

    <h1>Arc Reactor Core</h1>
    <p>Click the correct energy beam to stabilize the core.</p>

    <canvas id="reactor" width="400" height="400"></canvas>

    <!-- Tony Stark Verification Modal -->
    <div id="tonyVerifyModal" class="modal">
        <div class="modal-content" style="background:rgba(0,10,20,0.85); backdrop-filter: blur(6px);">

            <h2 style="margin-bottom:15px; text-shadow: 0 0 12px #00eaff;">STARK AUTHENTICATION</h2>
            <p>Love you <span style="color:#ffaa00;">___</span></p>

            <!-- Keypad Container -->
            <div id="keypadBox" style="
                width: 420px;                  /* increased width */
                margin: 35px auto;
                padding: 40px 35px;            /* more horizontal padding */
                border-radius: 22px;
                background: rgba(0, 25, 35, 0.60);
                border: 2px solid #00eaff;
                box-shadow:
                    0 0 25px #00eaff inset,
                    0 0 35px rgba(0,234,255,0.6),
                    0 0 50px rgba(0,234,255,0.25);
                backdrop-filter: blur(10px);
            ">



                <!-- Display -->
                <div id="displayBox" style="
                    width:100%;
                    height:55px;
                    background:rgba(0,0,0,0.6);
                    border:2px solid #00eaff;
                    border-radius:10px;
                    margin-bottom:20px;
                    font-size:2em;
                    letter-spacing:8px;
                    display:flex;
                    justify-content:center;
                    align-items:center;
                    box-shadow:0 0 12px #00eaff inset;
                "></div>

                <!-- NUMPAD -->
                <div class="keypad-grid">
                    <button class="keypad-btn">1</button>
                    <button class="keypad-btn">2</button>
                    <button class="keypad-btn">3</button>
                    <button class="keypad-btn">4</button>
                    <button class="keypad-btn">5</button>
                    <button class="keypad-btn">6</button>
                    <button class="keypad-btn">7</button>
                    <button class="keypad-btn">8</button>
                    <button class="keypad-btn">9</button>
                    <button class="keypad-btn">0</button>
                    <button id="clearBtn" class="keypad-btn special-btn red">CLR</button>
                    <button id="enterBtn" class="keypad-btn special-btn green">ENTER</button>
                </div>
            </div>

            <div class="error" id="errorMsg">Incorrect. Try again.</div>
        </div>
    </div>

    <!-- Success Modal with Image -->
    <div id="successModal" class="success-modal">
        <div class="success-content">
            <img src="ironmancookie.jpg" alt="Tony Stark Cookie"
                onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22400%22 height=%22300%22%3E%3Crect fill=%22%23000%22 width=%22400%22 height=%22300%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 font-size=%2224%22 fill=%22%2300eaff%22 text-anchor=%22middle%22 dominant-baseline=%22middle%22%3ETony Stark eating a cookie%3C/text%3E%3C/svg%3E'">

        </div>
    </div>

    <script>

        if (sessionStorage.getItem("ironman_unlock") !== "1") {
            document.body.innerHTML = "<h1 style='color:red'>ACCESS DENIED</h1>";
        }


        (function () {

            function qx(z) {
                return document.cookie
                    .split("; ")
                    .find(v => v.startsWith(z + "="))
                    ?.split("=")[1];
            }

            if (qx("arc_reactor") !== "stable") return;

            const phantom = [3, 9, 27, 81];
            phantom.map(x => x * 7).filter(x => x % 5);

            function zz(a) {
                return a.match(/.{1,2}/g)
                    .map(b => String.fromCharCode(parseInt(b, 16)))
                    .join("");
            }

            function yy(t, s) {
                return t.split("")
                    .map(c => String.fromCharCode(c.charCodeAt(0) - s))
                    .join("");
            }

            const aO =
                "NmY2NjU5NzY3NDI2Mzg0Mzc1MzE2ZjdhNjA3NDc1MzU3MzZjNjAzMjc0NjA2YTczMzE2ZjZlMzU2ZjI2Mzg0NQ==";

            const lA = atob(aO);
            const lB = zz(lA);

            const matrix = ["hydra", "vibranium", "quantum"];
            matrix.reverse().join("");

            const lC = yy(lB, 1);
            const omega = decodeURIComponent(lC);

            const symbol = [70, 76, 65, 71].map(n => String.fromCharCode(n)).join("");

            let container = document.createElement("div");
            container.style.cssText =
                "margin-top:30px;padding:20px;border:2px solid #00ff00;background:#001a00;color:#00ff00;font-weight:bold;font-size:1.2em;border-radius:5px;";

            container.innerHTML = "ðŸš© " + symbol + ": <code>" + omega + "</code>";
            document.body.appendChild(container);

        })();



        // Draw Arc Reactor
        let c = document.getElementById("reactor");
        let ctx = c.getContext("2d");
        const CX = 200, CY = 200;
        let frame = 0;

        function drawReactor() {
            ctx.clearRect(0, 0, 400, 400);

            // Background fill
            let bgGrad = ctx.createRadialGradient(CX, CY, 0, CX, CY, 200);
            bgGrad.addColorStop(0, "#021a22");
            bgGrad.addColorStop(1, "#000000");
            ctx.fillStyle = bgGrad;
            ctx.fillRect(0, 0, 400, 400);

            let t = frame * 0.008;
            let pulse = 0.85 + 0.15 * Math.sin(t * 2.5);
            let slowSpin = t * 0.15;
            let fastSpin = t * 0.4;

            ctx.save();

            // â”€â”€â”€â”€ Ambient glow â”€â”€â”€â”€
            let ambientGrad = ctx.createRadialGradient(CX, CY, 40, CX, CY, 195);
            ambientGrad.addColorStop(0, `rgba(105,241,241,${0.06 * pulse})`);
            ambientGrad.addColorStop(1, "rgba(105,241,241,0)");
            ctx.fillStyle = ambientGrad;
            ctx.beginPath();
            ctx.arc(CX, CY, 195, 0, Math.PI * 2);
            ctx.fill();

            // â”€â”€â”€â”€ Outer housing ring (brushed metal) â”€â”€â”€â”€
            ctx.lineWidth = 24;
            let metalGrad = ctx.createLinearGradient(30, 30, 370, 370);
            metalGrad.addColorStop(0, "#3d3d3d");
            metalGrad.addColorStop(0.2, "#585858");
            metalGrad.addColorStop(0.4, "#2e2e2e");
            metalGrad.addColorStop(0.6, "#505050");
            metalGrad.addColorStop(0.8, "#3a3a3a");
            metalGrad.addColorStop(1, "#484848");
            ctx.strokeStyle = metalGrad;
            ctx.beginPath();
            ctx.arc(CX, CY, 160, 0, Math.PI * 2);
            ctx.stroke();

            // Outer bevel highlights
            ctx.lineWidth = 0.8;
            ctx.strokeStyle = "rgba(200,240,255,0.1)";
            ctx.beginPath(); ctx.arc(CX, CY, 172, 0, Math.PI * 2); ctx.stroke();
            ctx.strokeStyle = "rgba(200,240,255,0.07)";
            ctx.beginPath(); ctx.arc(CX, CY, 148, 0, Math.PI * 2); ctx.stroke();

            // Engraved notch marks on outer ring
            ctx.save();
            ctx.translate(CX, CY);
            ctx.rotate(slowSpin * 0.1);
            for (let i = 0; i < 48; i++) {
                let a = (i / 48) * Math.PI * 2;
                ctx.strokeStyle = "rgba(0,0,0,0.3)";
                ctx.lineWidth = 1.5;
                ctx.beginPath();
                ctx.moveTo(Math.cos(a) * 149, Math.sin(a) * 149);
                ctx.lineTo(Math.cos(a) * 171, Math.sin(a) * 171);
                ctx.stroke();
            }
            ctx.restore();

            // â”€â”€â”€â”€ Blue glow channel (behind coils) â”€â”€â”€â”€
            ctx.lineWidth = 26;
            ctx.strokeStyle = `rgba(105,241,241,${0.12 * pulse})`;
            ctx.shadowColor = "rgba(105,241,241,0.3)";
            ctx.shadowBlur = 15;
            ctx.beginPath();
            ctx.arc(CX, CY, 132, 0, Math.PI * 2);
            ctx.stroke();
            ctx.shadowBlur = 0;

            // â”€â”€â”€â”€ 10 Copper coil segments â”€â”€â”€â”€
            ctx.save();
            ctx.translate(CX, CY);
            ctx.rotate(slowSpin);
            let numCoils = 10;
            let coilArc = (Math.PI * 2) / numCoils;
            let coilGap = 0.14;
            for (let i = 0; i < numCoils; i++) {
                let startAngle = i * coilArc + coilGap / 2;
                let endAngle = (i + 1) * coilArc - coilGap / 2;

                // Copper fill
                let cGrad = ctx.createLinearGradient(
                    Math.cos(startAngle) * 130, Math.sin(startAngle) * 130,
                    Math.cos(endAngle) * 130, Math.sin(endAngle) * 130
                );
                cGrad.addColorStop(0, "#cd8032");
                cGrad.addColorStop(0.3, "#e8a050");
                cGrad.addColorStop(0.5, "#b87333");
                cGrad.addColorStop(0.7, "#d4944a");
                cGrad.addColorStop(1, "#9a6328");
                ctx.lineWidth = 20;
                ctx.strokeStyle = cGrad;
                ctx.beginPath();
                ctx.arc(0, 0, 132, startAngle, endAngle);
                ctx.stroke();

                // Wire detail lines on each coil
                ctx.lineWidth = 0.8;
                ctx.strokeStyle = "rgba(90,60,20,0.5)";
                let wireCount = 8;
                for (let w = 0; w < wireCount; w++) {
                    let wa = startAngle + ((endAngle - startAngle) / wireCount) * w;
                    ctx.beginPath();
                    ctx.moveTo(Math.cos(wa) * 122, Math.sin(wa) * 122);
                    ctx.lineTo(Math.cos(wa) * 142, Math.sin(wa) * 142);
                    ctx.stroke();
                }
            }
            ctx.restore();

            // â”€â”€â”€â”€ Middle metal ring â”€â”€â”€â”€
            ctx.lineWidth = 7;
            let mGrad = ctx.createLinearGradient(80, 370, 370, 80);
            mGrad.addColorStop(0, "#444");
            mGrad.addColorStop(0.5, "#5c5c5c");
            mGrad.addColorStop(1, "#383838");
            ctx.strokeStyle = mGrad;
            ctx.beginPath();
            ctx.arc(CX, CY, 115, 0, Math.PI * 2);
            ctx.stroke();

            // Middle ring bevel
            ctx.lineWidth = 0.6;
            ctx.strokeStyle = "rgba(200,240,255,0.09)";
            ctx.beginPath(); ctx.arc(CX, CY, 119, 0, Math.PI * 2); ctx.stroke();
            ctx.strokeStyle = "rgba(200,240,255,0.06)";
            ctx.beginPath(); ctx.arc(CX, CY, 111, 0, Math.PI * 2); ctx.stroke();

            // â”€â”€â”€â”€ 8 Radial energy beams/spokes â”€â”€â”€â”€
            ctx.save();
            ctx.translate(CX, CY);
            ctx.rotate(-fastSpin);
            for (let i = 0; i < 8; i++) {
                let a = (i / 8) * Math.PI * 2;
                let x1 = Math.cos(a) * 78;
                let y1 = Math.sin(a) * 78;
                let x2 = Math.cos(a) * 112;
                let y2 = Math.sin(a) * 112;

                // Dark beam body
                ctx.strokeStyle = "#1a1a1a";
                ctx.lineWidth = 4;
                ctx.beginPath();
                ctx.moveTo(x1, y1);
                ctx.lineTo(x2, y2);
                ctx.stroke();

                // Glowing edge
                ctx.strokeStyle = `rgba(105,241,241,${0.15 * pulse})`;
                ctx.lineWidth = 1;
                ctx.shadowColor = "rgba(105,241,241,0.2)";
                ctx.shadowBlur = 4;
                ctx.beginPath();
                ctx.moveTo(x1, y1);
                ctx.lineTo(x2, y2);
                ctx.stroke();
                ctx.shadowBlur = 0;

                // Beam tip indicator â€” highlight the top beam specially
                if (i === 0) {
                    ctx.fillStyle = `rgba(105,241,241,${0.25 * pulse})`;
                    ctx.beginPath();
                    ctx.arc(x2, y2, 5, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
            ctx.restore();

            // â”€â”€â”€â”€ Inner glow channel â”€â”€â”€â”€
            ctx.lineWidth = 16;
            ctx.strokeStyle = `rgba(105,241,241,${0.14 * pulse})`;
            ctx.shadowColor = "rgba(105,241,241,0.25)";
            ctx.shadowBlur = 12;
            ctx.beginPath();
            ctx.arc(CX, CY, 95, 0, Math.PI * 2);
            ctx.stroke();
            ctx.shadowBlur = 0;

            // â”€â”€â”€â”€ Inner core ring â”€â”€â”€â”€
            ctx.lineWidth = 4;
            ctx.strokeStyle = "#3a3a3a";
            ctx.beginPath();
            ctx.arc(CX, CY, 78, 0, Math.PI * 2);
            ctx.stroke();
            ctx.strokeStyle = `rgba(105,241,241,${0.1 * pulse})`;
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.arc(CX, CY, 78, 0, Math.PI * 2);
            ctx.stroke();

            // â”€â”€â”€â”€ Core glow bloom â”€â”€â”€â”€
            let coreGlow = ctx.createRadialGradient(CX, CY, 0, CX, CY, 65);
            coreGlow.addColorStop(0, `rgba(255,255,255,${0.95 * pulse})`);
            coreGlow.addColorStop(0.15, `rgba(232,250,255,${0.8 * pulse})`);
            coreGlow.addColorStop(0.35, `rgba(126,220,240,${0.5 * pulse})`);
            coreGlow.addColorStop(0.65, `rgba(58,184,216,${0.3 * pulse})`);
            coreGlow.addColorStop(1, "rgba(26,104,128,0)");
            ctx.fillStyle = coreGlow;
            ctx.shadowColor = "rgba(105,241,241,0.5)";
            ctx.shadowBlur = 30;
            ctx.beginPath();
            ctx.arc(CX, CY, 65, 0, Math.PI * 2);
            ctx.fill();
            ctx.shadowBlur = 0;

            // â”€â”€â”€â”€ Dashed detail ring â”€â”€â”€â”€
            ctx.save();
            ctx.translate(CX, CY);
            ctx.rotate(fastSpin * 0.3);
            ctx.lineWidth = 1.2;
            ctx.strokeStyle = `rgba(105,241,241,${0.3 * pulse})`;
            ctx.setLineDash([6, 4.5]);
            ctx.beginPath();
            ctx.arc(0, 0, 45, 0, Math.PI * 2);
            ctx.stroke();
            ctx.setLineDash([]);
            ctx.restore();

            // â”€â”€â”€â”€ Core bright center â”€â”€â”€â”€
            let coreCenter = ctx.createRadialGradient(CX, CY, 0, CX, CY, 28);
            coreCenter.addColorStop(0, "#ffffff");
            coreCenter.addColorStop(0.5, `rgba(208,244,255,${pulse})`);
            coreCenter.addColorStop(1, `rgba(128,224,240,${0.7 * pulse})`);
            ctx.fillStyle = coreCenter;
            ctx.shadowColor = "rgba(200,240,255,0.6)";
            ctx.shadowBlur = 18;
            ctx.beginPath();
            ctx.arc(CX, CY, 28, 0, Math.PI * 2);
            ctx.fill();
            ctx.shadowBlur = 0;

            // â”€â”€â”€â”€ Core hotspot â”€â”€â”€â”€
            ctx.fillStyle = `rgba(255,255,255,${0.92 * pulse})`;
            ctx.shadowColor = "rgba(255,255,255,0.4)";
            ctx.shadowBlur = 8;
            ctx.beginPath();
            ctx.arc(CX, CY, 10, 0, Math.PI * 2);
            ctx.fill();
            ctx.shadowBlur = 0;

            ctx.fillStyle = "#ffffff";
            ctx.beginPath();
            ctx.arc(CX, CY, 4, 0, Math.PI * 2);
            ctx.fill();

            ctx.restore();

            frame++;
            requestAnimationFrame(drawReactor);
        }
        drawReactor();

        c.onclick = function (e) {
            let rect = c.getBoundingClientRect();
            let x = e.clientX - rect.left;
            let y = e.clientY - rect.top;

            if (x >= 190 && x <= 210 && y >= 80 && y <= 120) {
                showVerificationModal();
            } else {
                alert("Incorrect beam detected!");
            }
        };

        // Show verification modal
        function showVerificationModal() {
            let modal = document.getElementById("tonyVerifyModal");
            modal.style.display = "block";
            document.getElementById("errorMsg").style.display = "none";
        }

        let codeInput = "";

        // Attach numpad click events
        document.querySelectorAll(".keypad-btn").forEach(btn => {
            btn.addEventListener("click", () => {
                let val = btn.innerText;

                if (val >= "0" && val <= "9") {
                    if (codeInput.length < 4) {
                        codeInput += val;
                        document.getElementById("displayBox").innerText = codeInput;
                    }
                }
            });
        });

        // CLEAR
        document.getElementById("clearBtn").onclick = function () {
            codeInput = "";
            document.getElementById("displayBox").innerText = "";
        };

        // ENTER
        const verifyAnswer = function () {
            let _correct = "3000";

            if (codeInput === _correct) {
                document.cookie = "arc_reactor=stable; path=/";
                document.getElementById("tonyVerifyModal").style.display = "none";

                let successModal = document.getElementById("successModal");
                successModal.style.display = "block";

                successModal.onclick = function () {
                    successModal.style.display = "none";
                    window.location.reload(); // Reload to show the flag
                };
            } else {
                document.getElementById("errorMsg").style.display = "block";
                codeInput = "";
                document.getElementById("displayBox").innerText = "";
            }
        };

        document.getElementById("enterBtn").onclick = verifyAnswer;


        // Cancel verification
        function cancelVerification() {
            let modal = document.getElementById("tonyVerifyModal");
            modal.style.display = "none";
            document.getElementById("errorMsg").style.display = "none";
        }

        // Allow Enter key to verify
        document.addEventListener("keydown", function (e) {
            if (e.key === "Enter" && document.getElementById("tonyVerifyModal").style.display === "block") {
                verifyAnswer();
            }
        });
    </script>

</body>

</html>